% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analysis-anova.R
\name{friedman_omnibus}
\alias{friedman_omnibus}
\title{Friedman test (omnibus) with Kendall's W}
\usage{
friedman_omnibus(
  data,
  dv,
  within,
  id,
  missing = c("pairwise", "complete_case")
)
}
\arguments{
\item{data}{A data.frame in long format.}

\item{dv}{Dependent variable (numeric). Unquoted name or string.}

\item{within}{Within-subject factor. Unquoted name or string.}

\item{id}{Subject identifier. Unquoted name or string.}

\item{missing}{Missing-data strategy: \code{"pairwise"} (default) or \code{"complete_case"}.}
}
\value{
A one-row tibble (omnibus schema).
Columns:
\itemize{
  \item \code{design}: Design label (\code{"nonparametric_within"}).
  \item \code{method}: Omnibus method label (\code{"friedman"}).
  \item \code{term}: Name of the within-subject factor (the tested term).
  \item \code{statistic_type}: Type of omnibus test statistic (\code{"chi_squared"}).
  \item \code{statistic}: Omnibus test statistic value (\eqn{\chi^2}).
  \item \code{df1}: Always \code{NA} for this test (reserved column).
  \item \code{df2}: Always \code{NA} for this test (reserved column).
  \item \code{df}: Degrees of freedom for the Friedman test (k - 1).
  \item \code{p}: Omnibus p-value.
  \item \code{effect_size}: Effect size value (Kendall's W).
  \item \code{effect_size_type}: Effect size label (\code{"kendalls_W"}).
  \item \code{missing}: Missing-data strategy used (\code{"pairwise"} or \code{"complete_case"}).
  \item \code{n_obs}: Number of rows (observations) used after row-wise filtering (before enforcing complete blocks).
  \item \code{n_id}: Number of complete IDs (blocks) used in the Friedman test after enforcing complete cases.
}
}
\description{
Performs the omnibus Friedman test for a one-factor within-subject design and returns
Kendall's W.
}
\details{
**Test**: Friedman test. \cr
**Requirement**: unreplicated complete block design. \cr
**Statistic**: Chi-squared with df = k - 1. \cr
**Effect size**: Kendall's W computed as \eqn{W = \chi^2 / (n (k - 1))}.

\strong{Implementation note}:
The function stops if duplicated ID x within cells are detected. After that check, the wide
ID x within matrix is built using \code{tapply(...)} with \code{mean} as the aggregation function.
Because duplicates are ruled out, each cell is effectively a single value; using \code{mean}
here is a simple and stable way to map long data to a wide matrix without introducing extra
dependencies or complicated reshaping logic.

\strong{Missing-data handling (\code{missing})}
\itemize{
  \item \code{"pairwise"} and \code{"complete_case"} both enforce complete blocks for the omnibus
  test by keeping only complete rows in the wide matrix.
}
}
\examples{
dat = datasets::CO2 \%>\%
  dplyr::filter(Type == "Quebec", Treatment == "chilled") \%>\%
  dplyr::mutate(conc = factor(conc))

friedman_omnibus(dat, dv = uptake, within = conc, id = Plant)

}
